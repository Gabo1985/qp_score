<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>SCORE CALIFICACION</title>

<link rel="stylesheet" type="text/css" href="css/calificador.css">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<script type="text/javascript" src="javascript/jquery.min.js"></script>

<script>
	//EJECUCION DE LA FUNCION INICIO
	window.onload = inicio;
	//FUNCION DENTRO DEL HEAD PARA LA EJECUCION CON EL CONTENIDO INICIAL DE LA PAGINA
	function inicio() {
		{ 
			var cont = 0;
			$.ajax({    type : "GET",
						url : "http://CHD-QSISTEMS:8080/qp_score/rest/consultas/listaMarcas",
						contentType : "application/json; charset=utf-8",
						dataType : "json",
						success : function(response) {

							$.each(response,function(index, product) {
								cont++;
								//alert(response[index].nombre_marca);
								if(response[index].nombre_marca=="EXCELENTE")			
								{
									$("#EXCELENTE").attr("value",response[index].id_marca);
									$("#EXCELENTE").attr("id",response[index].id_marca);
								}else
									if(response[index].nombre_marca=="MUY BUENO")			
									{
										$("#MUY_BUENO").attr("value",response[index].id_marca);
										$("#MUY_BUENO").attr("id",response[index].id_marca);
										}else
										if(response[index].nombre_marca=="BUENO")			
										{
											$("#BUENO").attr("value",response[index].id_marca);
											$("#BUENO").attr("id",response[index].id_marca);
											
										}else
											if(response[index].nombre_marca=="REGULAR")			
											{
												$("#REGULAR").attr("value",response[index].id_marca);
												$("#REGULAR").attr("id",response[index].id_marca);
											}else
												if(response[index].nombre_marca=="MALO")			
											{
													$("#MALO").attr("value",response[index].id_marca);
													$("#MALO").attr("id",response[index].id_marca);
											}

							}); // FIN EACH

						},
						error : function(response) {
							console.log("error");
						}
					});
		}// FIN DE LA FUNCION DE INICIO
		
	}
</script>

<script>

	// NAVEGACION ENTRE DIV
	function showDiv(n) {
		document.getElementById("div" + n).style.display = 'block'
		return false;
	}

	function hideDiv(n) {
		for (x = 1; x <= 10; x++) {
			document.getElementById("div" + x).style.display = 'none'
		}
		document.getElementById(n).style.display = 'block'
		return false;
	}

	function toggleDiv(id) {
		for (x = 1; x <= 3; x++) {
			document.getElementById("div" + x).style.display = 'none';
		}

		document.getElementById(id).style.display = 'block';
	}
	
	function returnCalificacion() {
		toggleDiv("div1");
	}
</script>

<script>
	// ASIGNACION DE CALIFICACION EN INPUT

	$(document).ready(function() {
		$("#EXCELENTE").click(function() {
			$('#ValCal').val($(this).attr("id"));
			submenu("EXCELENTE"); //Redireccionar al Div correspondiente
			//alert($('#ValCal').val());
		});
		$("#MUY_BUENO").click(function() {
			$('#ValCal').val($(this).attr("id"));
			submenu("MUY BUENO");//Redireccionar al Div correspondiente
		});
		$("#BUENO").click(function() {
			$('#ValCal').val($(this).attr("id"));
			submenu("BUENO");//Redireccionar al Div correspondiente
		});
		$("#REGULAR").click(function() {
			$('#ValCal').val($(this).attr("id"));
			submenu("REGULAR");//Redireccionar al Div correspondiente
		});
		$("#MALO").click(function() {
			$('#ValCal').val($(this).attr("id"));
			submenu("MALO");//Redireccionar al Div correspondiente
		});
	});
</script>

<script>
//VALIDACION SUBMENÚ DE TODOS LOS BOTONES.
function submenu(marca) {
	var nombre_marca = marca;
	{
		var cont = 0;
		$.ajax({    type : "GET",
					url : "http://CHD-QSISTEMS:8080/qp_score/rest/consultas/listaMarcas",
					contentType : "application/json; charset=utf-8",
					dataType : "json",
					success : function(response) {
						$.each(response,function(index, product) {
							cont++;
							
							if(response[index].nombre_marca== nombre_marca)			
							{
								if(nombre_marca ="MUY BUENO")
									{nombre_marca= "MUY_BUENO"}
								
								if(response[index].opcion_pregunta== 1)
								{
									$("#" + nombre_marca).on("click",toggleDiv('div2'));  // DIV 2 ES PREGUNTAS
								}else		
								{
									$("#" + nombre_marca).on("click",toggleDiv('div3'));  // DIV 3 ES GRACIAS	
								}
							}
						}); // FIN EACH
					},
					error : function(response) {
						console.log("error");
					}
				});
	} // AJAX

}
</script>

<script>
// FUNCION DE PINTADO DE PREGUNTA 

		{ // FUNCION DE CARGA DE PREGUNTAS EN PANTALLA
			var cont = 0;
			$.ajax({    type : "GET",
						url : "http://chd-qsistems:8080/qp_score/rest/consultas/listaEncuesta",
						contentType : "application/json; charset=utf-8",
						dataType : "json",
						success : function(response) {

							$.each(response,function(index, product) {
								
								//alert(response[index].pregunta_encuesta);
							}); // FIN EACH

						},
						error : function(response) {
							console.log("error");
						}
					});
		}// FIN DE LA FUNCION DE INICIO
</script>
</head>

<body>
	<form name="fmScore" method="post" action="calificaciones">
		<table width="100%" border="0" cellspacing="0" cellpadding="0"text-align:center;>
			<tr>
				<td>
					<div id="div1">
						<table border=0 width=100% cellspacing="0" cellpadding="0"text-align:center;>
							<input type="hidden" name="ValCal" id="ValCal"></input>
							<tr>
								<td><button name="EXCELENTE" id="EXCELENTE" value=""
										onclick="setTimeout(returnCalificacion, 5000);">EXCELENTE</button></td>
								<td><button name="MUY_BUENO" id="MUY_BUENO" value=""
										onclick="setTimeout(returnCalificacion, 5000);">MUY
										BUENO</button></td>
								<td><button name="BUENO" id="BUENO" value=""
										onclick="setTimeout(returnCalificacion, 5000);">BUENO</button></td>
								<td><button name="REGULAR" id="REGULAR" value=""
										onclick="setTimeout(returnCalificacion, 5000);">REGULAR</button></td>
								<td><button name="MALO" id="MALO" value=""
										onclick="setTimeout(returnCalificacion, 5000);">MALO</button></td>
							</tr>
						</table>
					</div>

					<div id="div2" style="display: none">
						<table border=0 width=100% cellspacing="0" cellpadding="0"text-align:center;>
							<tr>
								<td><p id=pregunta2> ¿SE SIENTE SATISFECHO CON NUESTRA ATENCIÓN?</p></td>
							</tr>
							<tr>
								<td><button
										onclick="toggleDiv('div3');setTimeout(returnCalificacion, 3000);">SI</button></td>
							</tr>
							<tr>
								<td><button
										onclick="toggleDiv('div3');setTimeout(returnCalificacion, 3000);">NO</button></td>
							</tr>
						</table>
					</div>


					<div id="div3" style="display: none">
						<table border=0 width=100% cellspacing="0" cellpadding="0"text-align:center;>
							<tr>
								<td>GRACIAS POR CALIFICAR NUESTRO SERVICIO</td>
							</tr>
							<tr>
								<td>ES UN PLACER ATENDERLO</td>
							</tr>
						</table>
					</div>

				</td>
			</tr>
		</table>
	</form>
</body>
</html>